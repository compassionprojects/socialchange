#!/bin/bash -e

# Add any container initialization steps here

# Enable swap https://fly.io/docs/rails/cookbooks/deploy/#enabling-swap
#
fallocate -l 128M /swapfile
chmod 0600 /swapfile
mkswap /swapfile
echo 10 > /proc/sys/vm/swappiness
swapon /swapfile
echo 1 > /proc/sys/vm/overcommit_memory

exec "${@}"
